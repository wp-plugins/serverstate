google.load("visualization","1",{packages:["corechart"]});google.setOnLoadCallback(drawChart);
function drawChart(){var a,c=[],d=jQuery("#serverstate_chart"),b=new google.visualization.DataTable;if("undefined"===typeof serverstate)showSpinner(20,16,d),jQuery.ajax({url:ajaxurl,data:{action:"serverstate"},dataType:"JSON",success:function(a){serverstate=a;drawChart()}});else{if("undefined"!==typeof serverstate.error)return d.text(serverstate.error);var e=serverstate.day.split(","),f=serverstate.uptime.split(","),g=serverstate.response.split(",");for(a in e)c[a]=[e[a],parseInt(g[a]),parseInt(f[a])];
b.addColumn("string","Datum");b.addColumn("number","Antwortzeit in ms");b.addColumn("number","Erreichbarkeit in %");b.addRows(c);(new google.visualization.AreaChart(d.get(0))).draw(b,{width:parseInt(jQuery("#serverstate_chart").parent().width(),10),height:120,legend:"none",pointSize:6,lineWidth:3,gridlineColor:"#ececec",colors:["#39C"],reverseCategories:!0,backgroundColor:"transparent",vAxis:{baselineColor:"transparent",textPosition:"in",textStyle:{color:"#8F8F8F",fontSize:10}},hAxis:{textStyle:{color:"#3399CC",
fontSize:10}},chartArea:{width:"100%",height:"100%"}})}}function showSpinner(a,c,d){var b=jQuery("<canvas />").attr({width:a,height:a});b[0].getContext&&(d.append(b),ctx=b[0].getContext("2d"),ctx.translate(a/2,a/2),setInterval(function(){ctx.clearRect(-a/2,-a/2,a,a);ctx.rotate(2*Math.PI/c);for(var b=0;b<c;b++)ctx.beginPath(),ctx.moveTo(0,a/4),ctx.lineTo(0,a/2),ctx.strokeStyle="rgba(0,0,0,"+b/c+")",ctx.stroke(),ctx.rotate(2*Math.PI/c)},50))};